"use strict";(()=>{var e={};e.id=865,e.ids=[865,660],e.modules={643:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>x,getServerSideProps:()=>p,getStaticPaths:()=>u,getStaticProps:()=>m,reportWebVitals:()=>j,routeModule:()=>w,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>y});var a=s(7093),l=s(5244),o=s(1323),i=s(2899),c=s.n(i),n=s(5481),d=s(5367),h=e([d]);d=(h.then?(await h)():h)[0];let x=(0,o.l)(d,"default"),m=(0,o.l)(d,"getStaticProps"),u=(0,o.l)(d,"getStaticPaths"),p=(0,o.l)(d,"getServerSideProps"),g=(0,o.l)(d,"config"),j=(0,o.l)(d,"reportWebVitals"),y=(0,o.l)(d,"unstable_getStaticProps"),f=(0,o.l)(d,"unstable_getStaticPaths"),b=(0,o.l)(d,"unstable_getStaticParams"),N=(0,o.l)(d,"unstable_getServerProps"),v=(0,o.l)(d,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/me",pathname:"/me",bundlePath:"",filename:""},components:{App:n.default,Document:c()},userland:d});r()}catch(e){r(e)}})},3302:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(997);s(6689);let a=({item:e})=>{let{cart_item:t,product:s}=e,a=s.product_price?parseFloat(s.product_price):0,l=t.purchase_quantity||0,o=(a*l).toFixed(2);return(0,r.jsxs)("tr",{className:"border-b",children:[r.jsx("td",{className:"py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("img",{src:s.product_image_url,alt:s.product_name,className:"w-16 h-16 rounded-md"}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:s.product_name}),r.jsx("p",{className:"text-sm text-gray-600",children:t.color}),r.jsx("p",{className:"text-sm text-gray-600",children:t.size})]})]})}),(0,r.jsxs)("td",{className:"text-center",children:["Rp ",a.toFixed(2)]}),r.jsx("td",{className:"text-center",children:r.jsx("div",{className:"flex items-center justify-center space-x-2",children:r.jsx("span",{children:l})})}),(0,r.jsxs)("td",{className:"text-center",children:["Rp ",o]})]})}},2167:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(997);s(6689);let a=({product_id:e,seller_id:t,store_id:s,name:a,description:l,price:o,quantity:i,product_type:c,image_url:n,onDelete:d,onEdit:h})=>(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[r.jsx("img",{src:n||"/default-image.jpg",alt:a,className:"w-full h-48 object-cover"}),(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h2",{className:"text-xl font-bold mb-2",children:a}),r.jsx("p",{className:"text-gray-700 mb-2",children:l||"No description available"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-lg font-semibold text-green-500",children:["Rp",o]}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Qty: ",i]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Product Type: ",c]}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Seller ID: ",t]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:["Store ID: ",s]}),(0,r.jsxs)("div",{className:"flex justify-between mt-4",children:[r.jsx("button",{onClick:()=>h(e),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Edit"}),r.jsx("button",{onClick:()=>d(e),className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"Delete"})]})]})]})},2523:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Ir:()=>n,YI:()=>o,nM:()=>h,ry:()=>d,v3:()=>c,wr:()=>i});var a=s(9648),l=e([a]);a=(l.then?(await l)():l)[0];let o=async()=>{try{let e=sessionStorage.getItem("access_token");if(!e)throw Error("Access token is missing");let{data:t}=await a.default.get("http://127.0.0.1:5000/me",{headers:{Authorization:`Bearer ${e}`}});return t}catch(e){throw console.error("Error fetching user profile:",e),e}},i=async()=>{try{let e=sessionStorage.getItem("access_token"),t=(await a.default.get("http://127.0.0.1:5000/stores",{headers:{Authorization:`Bearer ${e}`}})).data;return t.forEach(e=>{e.store_id?sessionStorage.setItem("store_id",e.store_id):console.error("Store ID is undefined for the following store:",e)}),t}catch(e){throw console.error("Error fetching stores:",e),e}},c=async()=>{try{let e=sessionStorage.getItem("store_id");if(!e)throw Error("Store ID not found in sessionStorage");return(await a.default.get(`http://127.0.0.1:5000/stores/${e}/products`)).data}catch(e){throw console.error("Failed to fetch products for store:",e),e}},n=async e=>{let t=sessionStorage.getItem("product_id"),s=sessionStorage.getItem("access_token");try{return await new Promise(e=>setTimeout(e,500)),(await a.default.delete(`http://127.0.0.1:5000/products/${t}`,{headers:{Authorization:`Bearer ${s}`},data:e})).data}catch(e){throw console.error("Error deleting product:",e),e}},d=async e=>{let t=sessionStorage.getItem("access_token"),s=sessionStorage.getItem("store_id");try{return(await a.default.post(`http://127.0.0.1:5000/stores/${s}/products`,e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}catch(e){if(e.response&&e.response.data)throw Error(e.response.data.errors||"Failed to create product.");throw Error("Failed to create product.")}},h=async e=>{let t=sessionStorage.getItem("access_token"),s=sessionStorage.getItem("product_id");try{return(await a.default.put(`http://127.0.0.1:5000/products/${s}`,e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}})).data}catch(e){throw e}};r()}catch(e){r(e)}})},5986:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>b});var a=s(997);s(6689);var l=s(2305),o=s(5043),i=s(4206),c=s(2154),n=s(4283),d=s(6531),h=s(5450),x=s(3809),m=s(7136),u=s(5791),p=s(4487),g=e([l,o,i,c,n,d,h,x,m,u]);[l,o,i,c,n,d,h,x,m,u]=g.then?(await g)():g;let j=[{category:"Done",count:120,totalAmount:15e3},{category:"Processed",count:80,totalAmount:1e4},{category:"Unprocessed",count:50,totalAmount:5e3}],y=["#0088FE","#00C49F","#FFBB28"],f=({category:e,count:t,totalAmount:s})=>(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 m-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:e}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Transactions: ",t]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Total Amount: $",s]})]}),b=()=>(0,a.jsxs)("div",{className:"p-6 bg-gray-100 min-h-screen",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Transaction Dashboard"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:j.map(e=>a.jsx(f,{...e},e.category))}),(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsx(l.h,{width:"100%",height:400,children:(0,a.jsxs)(o.v,{data:j,children:[a.jsx(i.q,{strokeDasharray:"3 3"}),a.jsx(c.K,{dataKey:"category"}),a.jsx(n.B,{}),a.jsx(d.u,{}),a.jsx(h.D,{}),a.jsx(x.$,{dataKey:"totalAmount",fill:"#82ca9d"})]})}),a.jsx(l.h,{width:"100%",height:400,children:(0,a.jsxs)(m.u,{children:[a.jsx(u.b,{data:j,dataKey:"totalAmount",nameKey:"category",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:j.map((e,t)=>a.jsx(p.b,{fill:y[t%y.length]},`cell-${t}`))}),a.jsx(d.u,{})]})})]})]});r()}catch(e){r(e)}})},3785:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>o});var a=s(9648),l=e([a]);a=(l.then?(await l)():l)[0];let o=async()=>{try{await a.default.post("http://127.0.0.1:5000/logout",{},{headers:{Authorization:`Bearer ${sessionStorage.getItem("access_token")}`}}),sessionStorage.removeItem("access_token"),sessionStorage.removeItem("role"),sessionStorage.removeItem("username"),sessionStorage.removeItem("store_id"),sessionStorage.removeItem("product_id"),console.log("Logout successful"),window.location.href="/login"}catch(e){console.error("Logout failed:",e)}};r()}catch(e){r(e)}})},5367:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>f});var a=s(997),l=s(6689),o=s(2523),i=s(2167),c=s(4208),n=s(6740),d=s(5986),h=s(3785),x=s(5738),m=s(3590),u=s(5068),p=s(1219),g=s(1163),j=e([o,c,n,d,h,u]);[o,c,n,d,h,u]=j.then?(await j)():j;let y=({selectedSection:e,stores:t,onDeleteProduct:s})=>{let r=(0,g.useRouter)(),l=e=>{sessionStorage.setItem("store_id",e),r.push("/me/new_product")},p=e=>{r.push("/me/promotion")},j=e=>{sessionStorage.setItem("product_id",e),r.push("/me/update_product")},y=async e=>{try{sessionStorage.setItem("product_id",e),await (0,o.Ir)(e),console.log(`Product with ID ${e} deleted successfully.`),alert("Product deleted successfully!"),r.reload(),sessionStorage.removeItem("product_id")}catch(e){console.error("Failed to delete product:",e)}};if(e.startsWith("store_")){let s=t[parseInt(e.split("_")[1])];return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold",children:[s.store_name," - Products"]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[a.jsx("button",{className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",onClick:()=>l(s.id),children:"+ Add New Product"}),a.jsx("button",{className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-700",onClick:()=>p(s.id),children:"+ Create Promotion"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.products&&s.products.length>0?s.products.map((e,t)=>a.jsx(i.Z,{product_id:e.product_id,seller_id:e.seller_id,store_id:e.store_id,name:e.name,description:e.description,price:e.price,quantity:e.quantity,product_type:e.product_type,image_url:e.image_url,onDelete:()=>y(e.product_id),onEdit:()=>j(e.product_id)},t)):a.jsx("div",{className:"text-center mt-4",children:"You don't have any product."})})]})}switch(e){case"my_info":return a.jsx(n.default,{});case"dashboard":return a.jsx(d.Z,{});case"transactions":return a.jsx(c.default,{transactions:t.transactions});case"wishlist":return a.jsx(x.default,{});case"logout":return a.jsx(h.default,{});case"shopping_cart":return a.jsx(u.default,{});case"my_orders":return a.jsx(m.default,{});default:return a.jsx("div",{className:"p-4",children:"Select a section from the menu."})}},f=()=>{let[e,t]=(0,l.useState)(null),[s,r]=(0,l.useState)("my_info"),[i,c]=(0,l.useState)(!0),[n,d]=(0,l.useState)(null),[h,x]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,o.YI)();t(e),c(!1)}catch(e){d("Failed to fetch user profile. Please try again later."),c(!1)}})()},[]);let m=async()=>{try{let e=await (0,o.wr)();x(e),console.log("Fetched stores:",e)}catch(e){d("Failed to fetch stores. Please try again later.")}},u=async e=>{try{let t=h[e].id,s=await (0,o.v3)(t),r=[...h];r[e].products=s,x(r),console.log(`Fetched products for store ${t}:`,s)}catch(e){d("Failed to fetch products for this store. Please try again later.")}};return((0,l.useEffect)(()=>{if(s.startsWith("store_")){let e=parseInt(s.split("_")[1]);u(e)}},[s]),i)?a.jsx("div",{className:"text-center mt-20",children:"Loading..."}):n?a.jsx("div",{className:"text-center mt-20 text-red-500",children:n}):e?(0,a.jsxs)("div",{className:"flex",children:[a.jsx(p.default,{username:e.username,role:e.role,setSelectedSection:r,selectedSection:s,stores:h,fetchStores:m}),a.jsx("div",{className:"w-3/4",children:a.jsx(y,{selectedSection:s,stores:h})})]}):a.jsx("div",{className:"text-center mt-20",children:"User profile not found."})};r()}catch(e){r(e)}})},6740:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>n});var a=s(997),l=s(6689),o=s(9648),i=s(1163),c=e([o]);o=(c.then?(await c)():c)[0];let n=()=>{let[e,t]=(0,l.useState)(!0),[s,r]=(0,l.useState)(null),[c,n]=(0,l.useState)({}),d=(0,i.useRouter)();return((0,l.useEffect)(()=>{(async()=>{try{let e=await o.default.get("http://127.0.0.1:5000/me",{headers:{Authorization:`Bearer ${sessionStorage.getItem("access_token")}`}});n(e.data)}catch(e){r(e.response?e.response.data.message:"An error occurred")}finally{t(!1)}})()},[]),e)?a.jsx("div",{className:"bg-gray-100 flex justify-center items-center min-h-screen",children:a.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Loading..."})}):s?a.jsx("div",{className:"bg-gray-100 flex justify-center items-center min-h-screen",children:a.jsx("p",{className:"text-lg font-medium text-red-500",children:s})}):a.jsx("div",{className:"bg-gray-100 flex justify-center items-center min-h-screen",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-3xl",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"User Profile"}),(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),a.jsx("p",{className:"mt-1 text-gray-900",children:c.username||"No username available"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),a.jsx("p",{className:"mt-1 text-gray-900",children:c.email||"No email available"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),a.jsx("p",{className:"mt-1 text-gray-900",children:c.role||"No role available"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Joined At"}),a.jsx("p",{className:"mt-1 text-gray-900",children:c.created_at?new Date(c.created_at).toLocaleDateString():"No date available"})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{onClick:()=>{d.push("/me/update_profile")},className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg",children:"Update Profile"})})]})})};r()}catch(e){r(e)}})},1219:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var r=s(997);s(6689);var a=s(1163);let l=({username:e,role:t,setSelectedSection:s,selectedSection:l,stores:o,fetchStores:i})=>{let c=(0,a.useRouter)(),n=[{label:"\uD83D\uDC64 MyInfo",section:"my_info"}],d="seller"===t?[...n,{label:"\uD83D\uDCCA Dashboard",section:"dashboard"},{label:"\uD83C\uDFEA Stores",section:"stores_dropdown"}]:[...n,{label:"\uD83D\uDCE6 MyOrders",section:"my_orders"},{label:"❤️ Wishlist",section:"wishlist"},{label:"\uD83D\uDCB8 Transactions",section:"transactions"}];d.push({label:"\uD83D\uDD13 Logout",section:"logout"});let h=()=>{i()},x=()=>{c.push("/me/create_store_form")};return(0,r.jsxs)("div",{className:"w-64 bg-white p-4 rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:["Hello ",e]}),r.jsx("p",{className:"text-gray-500",children:"Welcome to your Account"})]}),r.jsx("ul",{className:"space-y-4",children:d.map(({label:e,section:t})=>"stores_dropdown"===t?(0,r.jsxs)("li",{children:[(0,r.jsxs)("button",{className:"flex items-center text-gray-700 hover:text-gray-900 transition-colors",onClick:h,children:[r.jsx("span",{className:"mr-2",children:e.split(" ")[0]})," ",e.split(" ")[1]]}),0===o.length?r.jsx("div",{className:"pl-4 mt-2",children:r.jsx("button",{className:"bg-blue-500 text-white py-1 px-2 rounded hover:bg-blue-700",onClick:x,children:"Create New Store"})}):r.jsx("ul",{className:"pl-4 space-y-2",children:o.map((e,t)=>r.jsx("li",{children:r.jsx("button",{className:`flex items-center text-gray-700 hover:text-gray-900 transition-colors ${l===`store_${t}`?"font-bold":""}`,onClick:()=>s(`store_${t}`),children:e.store_name})},t))})]},t):r.jsx("li",{children:(0,r.jsxs)("button",{className:`flex items-center text-gray-700 hover:text-gray-900 transition-colors ${l===t?"font-bold":""}`,onClick:()=>s(t),children:[r.jsx("span",{className:"mr-2",children:e.split(" ")[0]})," ",e.split(" ")[1]]})},t))})]})}},4208:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>c});var a=s(997),l=s(6689),o=s(9648),i=e([o]);o=(i.then?(await i)():i)[0];let c=({transactions:e})=>{let[t,s]=(0,l.useState)(!1),[r,i]=(0,l.useState)(null),c=async e=>{s(!0),i(null);try{let t=new FormData;t.append("delivery_method",e.deliveryMethod);let s=await o.default.post("http://127.0.0.1:5000/orders",t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("access_token")}`}});201===s.status?alert("Order created successfully!"):alert("Failed to create order.")}catch(e){i(e.response?e.response.data.error:"Error creating order")}finally{s(!1)}};return(0,a.jsxs)("div",{className:"overflow-x-auto",children:[a.jsx("h1",{className:"text-xl font-semibold mb-6",children:"Transactions"}),(0,a.jsxs)("table",{className:"min-w-full bg-white",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"py-2 px-4 bg-gray-200 text-left",children:"Order ID"}),a.jsx("th",{className:"py-2 px-4 bg-gray-200 text-left",children:"Consumer ID"}),a.jsx("th",{className:"py-2 px-4 bg-gray-200 text-left",children:"Total Amount"}),a.jsx("th",{className:"py-2 px-4 bg-gray-200 text-left",children:"Delivery Method"}),a.jsx("th",{className:"py-2 px-4 bg-gray-200 text-left",children:"Details"})]})}),a.jsx("tbody",{children:e.map((e,s)=>(0,a.jsxs)("tr",{className:"border-b",children:[a.jsx("td",{className:"py-2 px-4",children:e.orderId}),a.jsx("td",{className:"py-2 px-4",children:e.consumerId}),a.jsx("td",{className:"py-2 px-4",children:e.totalAmount}),a.jsx("td",{className:"py-2 px-4",children:e.deliveryMethod}),a.jsx("td",{className:"py-2 px-4",children:a.jsx("button",{onClick:()=>c(e),className:`bg-blue-500 text-white px-3 py-1 rounded ${t?"opacity-50":""}`,disabled:t,children:t?"Processing...":"Details"})})]},s))})]}),r&&a.jsx("p",{className:"text-red-500 mt-4",children:r})]})};r()}catch(e){r(e)}})},5738:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var r=s(997);s(6689);let a=({imgSrc:e,title:t,color:s,quantity:a,price:l})=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("button",{className:"text-gray-500 hover:text-gray-700 mr-4",children:r.jsx("i",{className:"fas fa-times"})}),r.jsx("img",{src:e,alt:"Product Image",className:"w-16 h-16 rounded-lg object-cover mr-4"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Color: ",s]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Quantity: ",a]})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("span",{className:"text-lg font-semibold text-gray-800 mr-6",children:["Rp. ",l]}),r.jsx("button",{className:"bg-green-500 hover:bg-green-300 text-white font-medium py-2 px-4 rounded-lg",children:"Add to cart"})]})]}),l=()=>r.jsx("div",{className:"bg-gray-100 flex justify-center items-center min-h-screen",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-4xl",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Wishlist"}),r.jsx("div",{className:"space-y-4",children:[{imgSrc:"https://placehold.co/60x60",title:"Blue Flower Print Crop Top",color:"Yellow",quantity:1,price:30},{imgSrc:"https://placehold.co/60x60",title:"Yellow Flower Print Dress",color:"Yellow",quantity:1,price:78},{imgSrc:"https://placehold.co/60x60",title:"White Hoodie Long Sleeve",color:"White",quantity:1,price:134},{imgSrc:"https://placehold.co/60x60",title:"Brown Men’s Long Sleeve T-shirt",color:"Brown",quantity:1,price:93}].map(e=>r.jsx(a,{...e},e.title))})]})})},5068:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>d});var a=s(997),l=s(6689),o=s(3302),i=s(9648),c=s(1163),n=e([i]);i=(n.then?(await n)():n)[0];let d=()=>{let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[n,d]=(0,l.useState)("Delivery"),[h,x]=(0,l.useState)(5e3),m=(0,c.useRouter)();(0,l.useEffect)(()=>{(async()=>{try{let e=sessionStorage.getItem("access_token");console.log("Fetching cart items with token:",e);let s=await i.default.get("http://127.0.0.1:5000/cart/item",{headers:{Authorization:`Bearer ${e}`}});console.log("Fetched cart items:",s.data),t(s.data)}catch(e){console.error("Error fetching cart items:",e)}finally{r(!1)}})()},[]);let u=async()=>{let e=sessionStorage.getItem("access_token");if(!e){m.push("/login");return}try{let t=await i.default.post("http://127.0.0.1:5000/orders",{delivery_method:n},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});console.log("Order created:",t.data);let s=t.data.order_id,r=t.data.total_amount;sessionStorage.setItem("order_id",s),sessionStorage.setItem("total_amount",r),m.push("/checkout")}catch(e){console.error("Error during checkout:",e)}};if(s)return console.log("Loading cart items..."),a.jsx("div",{children:"Loading..."});if(!e||0===e.length||e.message)return console.log("Cart is empty or contains a message:",e),a.jsx("div",{children:e.message||"Your cart is empty"});let p=e.reduce((e,t)=>e+parseFloat(t.product.product_price)*t.cart_item.purchase_quantity,0);return a.jsx("div",{className:"max-w-3xl mx-auto py-12",children:(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[a.jsx("div",{className:"text-xl font-semibold mb-4",children:"Shopping Cart"}),(0,a.jsxs)("table",{className:"min-w-full border-collapse",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"font-semibold text-gray-700 border-b",children:[a.jsx("th",{className:"py-2 text-left",children:"Product Details"}),a.jsx("th",{className:"py-2 text-center",children:"Price"}),a.jsx("th",{className:"py-2 text-center",children:"Quantity"}),a.jsx("th",{className:"py-2 text-center",children:"Subtotal"})]})}),a.jsx("tbody",{children:e.map(e=>a.jsx(o.Z,{item:e},e.cart_item.cart_item_id))})]}),(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount Codes"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[a.jsx("input",{type:"text",className:"flex-1 border rounded p-2",placeholder:"Enter your coupon code"}),a.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Apply Coupon"})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shipping Method"}),(0,a.jsxs)("select",{value:n,onChange:e=>{let t=e.target.value;d(t),x("Pickup"===t?0:5e3)},className:"border rounded p-2 w-full",children:[a.jsx("option",{value:"Pickup",children:"Pickup"}),a.jsx("option",{value:"Delivery",children:"Delivery"})]})]}),(0,a.jsxs)("div",{className:"border-t mt-6 pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-lg font-medium",children:[a.jsx("p",{children:"Sub Total"}),(0,a.jsxs)("p",{children:["Rp ",p.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-medium",children:[a.jsx("p",{children:"Shipping"}),(0,a.jsxs)("p",{children:["Rp ",h.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[a.jsx("p",{children:"Grand Total"}),(0,a.jsxs)("p",{children:["Rp ",(p+h).toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-6",children:[a.jsx("button",{className:"text-blue-500 hover:text-blue-700",children:"Continue Shopping"}),a.jsx("button",{onClick:u,className:"bg-green-500 text-white px-6 py-3 rounded",children:"Proceed To Checkout"})]})]})})};r()}catch(e){r(e)}})},5502:e=>{e.exports=require("eventemitter3")},8759:e=>{e.exports=require("lodash/every")},6918:e=>{e.exports=require("lodash/find")},8190:e=>{e.exports=require("lodash/flatMap")},1712:e=>{e.exports=require("lodash/get")},2327:e=>{e.exports=require("lodash/isBoolean")},113:e=>{e.exports=require("lodash/isEqual")},5716:e=>{e.exports=require("lodash/isFunction")},8843:e=>{e.exports=require("lodash/isNaN")},6069:e=>{e.exports=require("lodash/isNil")},7078:e=>{e.exports=require("lodash/isNumber")},5795:e=>{e.exports=require("lodash/isObject")},5452:e=>{e.exports=require("lodash/isPlainObject")},7026:e=>{e.exports=require("lodash/isString")},3824:e=>{e.exports=require("lodash/last")},9941:e=>{e.exports=require("lodash/mapValues")},6625:e=>{e.exports=require("lodash/max")},1341:e=>{e.exports=require("lodash/maxBy")},541:e=>{e.exports=require("lodash/memoize")},9642:e=>{e.exports=require("lodash/min")},9318:e=>{e.exports=require("lodash/minBy")},4042:e=>{e.exports=require("lodash/range")},4129:e=>{e.exports=require("lodash/some")},3672:e=>{e.exports=require("lodash/sortBy")},1381:e=>{e.exports=require("lodash/throttle")},9309:e=>{e.exports=require("lodash/uniqBy")},5428:e=>{e.exports=require("lodash/upperFirst")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},3522:e=>{e.exports=require("react-smooth")},997:e=>{e.exports=require("react/jsx-runtime")},9540:e=>{e.exports=require("recharts-scale")},8970:e=>{e.exports=require("victory-vendor/d3-scale")},2725:e=>{e.exports=require("victory-vendor/d3-shape")},9648:e=>{e.exports=import("axios")},6593:e=>{e.exports=import("clsx")},4281:e=>{e.exports=import("tiny-invariant")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[117,899,664,342,666,31],()=>s(643));module.exports=r})();