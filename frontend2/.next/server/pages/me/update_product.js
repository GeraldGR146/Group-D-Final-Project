(()=>{var e={};e.id=345,e.ids=[345,888,660],e.modules={6335:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>x,reportWebVitals:()=>b,routeModule:()=>w,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>f});var a=s(7093),o=s(5244),i=s(1323),n=s(2899),l=s.n(n),c=s(5481),d=s(5149),u=e([d]);d=(u.then?(await u)():u)[0];let m=(0,i.l)(d,"default"),x=(0,i.l)(d,"getStaticProps"),p=(0,i.l)(d,"getStaticPaths"),h=(0,i.l)(d,"getServerSideProps"),g=(0,i.l)(d,"config"),b=(0,i.l)(d,"reportWebVitals"),f=(0,i.l)(d,"unstable_getStaticProps"),y=(0,i.l)(d,"unstable_getStaticPaths"),j=(0,i.l)(d,"unstable_getStaticParams"),N=(0,i.l)(d,"unstable_getServerProps"),v=(0,i.l)(d,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/me/update_product",pathname:"/me/update_product",bundlePath:"",filename:""},components:{App:c.default,Document:l()},userland:d});r()}catch(e){r(e)}})},1390:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(997),a=s(6689);let o=({onSearch:e})=>{let[t,s]=(0,a.useState)("");return(0,r.jsxs)("div",{className:"flex justify-center",children:[r.jsx("input",{type:"text",value:t,onChange:e=>{s(e.target.value)},className:"w-full max-w-lg p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search for products and stores..."}),r.jsx("button",{onClick:()=>{e(t)},className:"ml-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Search"})]})}},2523:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Ir:()=>c,YI:()=>i,nM:()=>u,ry:()=>d,v3:()=>l,wr:()=>n});var a=s(9648),o=e([a]);a=(o.then?(await o)():o)[0];let i=async()=>{try{let e=sessionStorage.getItem("access_token");if(!e)throw Error("Access token is missing");let{data:t}=await a.default.get("http://127.0.0.1:5000/me",{headers:{Authorization:`Bearer ${e}`}});return t}catch(e){throw console.error("Error fetching user profile:",e),e}},n=async()=>{try{let e=sessionStorage.getItem("access_token"),t=(await a.default.get("http://127.0.0.1:5000/stores",{headers:{Authorization:`Bearer ${e}`}})).data;return t.forEach(e=>{e.store_id?sessionStorage.setItem("store_id",e.store_id):console.error("Store ID is undefined for the following store:",e)}),t}catch(e){throw console.error("Error fetching stores:",e),e}},l=async()=>{try{let e=sessionStorage.getItem("store_id");if(!e)throw Error("Store ID not found in sessionStorage");return(await a.default.get(`http://127.0.0.1:5000/stores/${e}/products`)).data}catch(e){throw console.error("Failed to fetch products for store:",e),e}},c=async e=>{let t=sessionStorage.getItem("product_id"),s=sessionStorage.getItem("access_token");try{return await new Promise(e=>setTimeout(e,500)),(await a.default.delete(`http://127.0.0.1:5000/products/${t}`,{headers:{Authorization:`Bearer ${s}`},data:e})).data}catch(e){throw console.error("Error deleting product:",e),e}},d=async e=>{let t=sessionStorage.getItem("access_token"),s=sessionStorage.getItem("store_id");try{return(await a.default.post(`http://127.0.0.1:5000/stores/${s}/products`,e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}catch(e){if(e.response&&e.response.data)throw Error(e.response.data.errors||"Failed to create product.");throw Error("Failed to create product.")}},u=async e=>{let t=sessionStorage.getItem("access_token"),s=sessionStorage.getItem("product_id");try{return(await a.default.put(`http://127.0.0.1:5000/products/${s}`,e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}})).data}catch(e){throw e}};r()}catch(e){r(e)}})},5481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(997);s(9605);var a=s(6689),o=s.n(a),i=s(1664),n=s.n(i),l=s(1390);let c=()=>r.jsx("header",{className:"bg-gray-100",children:(0,r.jsxs)("div",{className:"w-[1200px] mx-auto h-[60px] flex items-center justify-between border-b border-gray-200 bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"App Name"}),(0,r.jsxs)("nav",{className:"flex space-x-6 text-gray-600",children:[r.jsx(n(),{href:"/",className:"hover:text-gray-800",children:"Home"}),r.jsx("div",{className:"relative group",children:(0,r.jsxs)(n(),{href:"/products",className:"hover:text-gray-800 flex items-center",children:["Product ",r.jsx("i",{className:"fas fa-chevron-down ml-1 text-xs"})]})}),r.jsx(n(),{href:"/shopping_cart",className:"hover:text-gray-800",children:"Shopping Cart"}),r.jsx(n(),{href:"#",className:"hover:text-gray-800",children:"Blog"}),r.jsx(n(),{href:"#",className:"hover:text-gray-800",children:"Contact"}),r.jsx(n(),{href:"#",className:"hover:text-gray-800",children:"Pages"})]})]}),r.jsx(l.Z,{}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-blue-600",children:[r.jsx(n(),{href:"/register",className:"hover:underline",children:"Login / Register"}),r.jsx(n(),{href:"#",className:"text-gray-500 hover:text-blue-600",children:r.jsx("i",{className:"fas fa-search"})}),r.jsx(n(),{href:"#",className:"text-gray-500 hover:text-blue-600",children:r.jsx("i",{className:"fas fa-shopping-cart"})}),r.jsx(n(),{href:"#",className:"text-gray-500 hover:text-blue-600",children:r.jsx("i",{className:"fas fa-heart"})})]})]})});class d extends o().Component{render(){return(0,r.jsxs)("div",{className:"flex-1 px-4",children:[r.jsx("h4",{className:"text-lg font-semibold mb-4",children:this.props.title}),r.jsx("ul",{children:this.props.items.map((e,t)=>r.jsx("li",{className:"mb-2",children:e},t))})]})}}class u extends o().Component{render(){return r.jsx("div",{className:"mt-8 text-center",children:r.jsx("p",{className:"text-sm text-gray-600",children:"Description anything"})})}}class m extends o().Component{render(){return(0,r.jsxs)("footer",{className:"bg-gray-100 p-10",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"App Name"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("a",{href:"#",className:"text-blue-600",children:r.jsx("i",{className:"fab fa-facebook-f"})}),r.jsx("a",{href:"#",className:"text-pink-600",children:r.jsx("i",{className:"fab fa-instagram"})}),r.jsx("a",{href:"#",className:"text-blue-400",children:r.jsx("i",{className:"fab fa-twitter"})})]})]}),r.jsx(d,{title:"Company Info",items:["About Us","Carrier","We are hiring","Blog"]}),r.jsx(d,{title:"Legal",items:["About Us","Carrier","We are hiring","Blog"]}),r.jsx(d,{title:"Features",items:["Business Marketing","User Analytic","Live Chat","Unlimited Support"]}),r.jsx(d,{title:"Resources",items:["IOS & Android","Watch a Demo","Customers","API"]}),(0,r.jsxs)("div",{className:"flex-1 px-4",children:[r.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Get In Touch"}),(0,r.jsxs)("form",{className:"flex mb-4",children:[r.jsx("input",{type:"email",placeholder:"Your Email",className:"p-2 border border-gray-300 rounded-l-md flex-grow"}),r.jsx("button",{type:"submit",className:"p-2 bg-blue-500 text-white rounded-r-md",children:"Subscribe"})]}),r.jsx("p",{className:"text-gray-600",children:"Lorem ipsum dolor amit."})]})]}),r.jsx(u,{})]})}}let x=function({Component:e,pageProps:t}){return(0,r.jsxs)(r.Fragment,{children:[r.jsx(c,{}),r.jsx(e,{...t}),r.jsx(m,{})]})}},5149:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>d});var a=s(997);s(6689);var o=s(1163),i=s(2296),n=s(5609),l=s(2523),c=e([l]);l=(c.then?(await c)():c)[0];let d=()=>{let e=(0,o.useRouter)(),t=n.object({name:n.string().required("Product name is required"),description:n.string(),price:n.number().required("Price is required").positive("Price must be positive"),product_type:n.string().oneOf(["Standard","Premium"],'Product type must be either "Standard" or "Premium"').required("Category is required"),quantity:n.number().required("Quantity is required").min(0,"Quantity cannot be negative"),image_url:n.string().url("Invalid URL")}),s=async(t,{setSubmitting:s,setErrors:r})=>{let a={name:t.name,description:t.description,price:t.price,product_type:t.product_type,quantity:t.quantity,image_url:t.image_url};console.log("Payload being sent:",a);try{let t=await (0,l.nM)(a);console.log("Product updated successfully:",t),sessionStorage.removeItem("product_id"),e.push("/me")}catch(e){console.error("Error during product update:",e.response?e.response.data:e.message),r({submit:e.response?e.response.data.errors:e.message})}finally{s(!1)}};return a.jsx(i.Formik,{initialValues:{name:"",description:"",price:"",product_type:"Standard",quantity:0,image_url:""},validationSchema:t,onSubmit:s,children:({isSubmitting:e,errors:t})=>(0,a.jsxs)(i.Form,{className:"max-w-lg mx-auto p-4 bg-white shadow-md rounded",children:[(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Name:"}),a.jsx(i.Field,{type:"text",name:"name",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),a.jsx(i.ErrorMessage,{name:"name",component:"div",className:"text-red-500 text-xs mt-2"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description:"}),a.jsx(i.Field,{type:"text",name:"description",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),a.jsx(i.ErrorMessage,{name:"description",component:"div",className:"text-red-500 text-xs mt-2"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Price:"}),a.jsx(i.Field,{type:"number",name:"price",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),a.jsx(i.ErrorMessage,{name:"price",component:"div",className:"text-red-500 text-xs mt-2"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Category:"}),(0,a.jsxs)(i.Field,{as:"select",name:"product_type",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[a.jsx("option",{value:"Standard",children:"Standard"}),a.jsx("option",{value:"Premium",children:"Premium"})]}),a.jsx(i.ErrorMessage,{name:"product_type",component:"div",className:"text-red-500 text-xs mt-2"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Available Quantity:"}),a.jsx(i.Field,{type:"number",name:"quantity",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),a.jsx(i.ErrorMessage,{name:"quantity",component:"div",className:"text-red-500 text-xs mt-2"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Product Image URL:"}),a.jsx(i.Field,{type:"text",name:"image_url",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),a.jsx(i.ErrorMessage,{name:"image_url",component:"div",className:"text-red-500 text-xs mt-2"})]}),t.submit&&a.jsx("div",{className:"mb-4 text-red-500 text-sm",children:t.submit}),a.jsx("button",{type:"submit",disabled:e,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:e?"Submitting...":"Submit"})]})})};r()}catch(e){r(e)}})},9605:()=>{},2296:e=>{"use strict";e.exports=require("formik")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},5609:e=>{"use strict";e.exports=require("yup")},9648:e=>{"use strict";e.exports=import("axios")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[117,899,664,342],()=>s(6335));module.exports=r})();